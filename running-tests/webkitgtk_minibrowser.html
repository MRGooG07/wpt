<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>WebKitGTK MiniBrowser &#8212; web-platform-tests  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=12dfc556" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="WPE WebKit MiniBrowser" href="wpewebkit_minibrowser.html" />
    <link rel="prev" title="Safari" href="safari.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="webkitgtk-minibrowser">
<h1>WebKitGTK MiniBrowser<a class="headerlink" href="#webkitgtk-minibrowser" title="Link to this heading">¶</a></h1>
<p>To be able to run tests with the <a class="reference external" href="https://webkitgtk.org/">WebKitGTK</a>
MiniBrowser you need the following packages installed:</p>
<ul class="simple">
<li><p>Fedora: <code class="docutils literal notranslate"><span class="pre">webkitgtk6.0</span></code></p></li>
<li><p>Debian or Ubuntu: <code class="docutils literal notranslate"><span class="pre">webkitgtk-driver</span></code> or <code class="docutils literal notranslate"><span class="pre">webkit2gtk-driver</span></code></p></li>
<li><p>Arch: <code class="docutils literal notranslate"><span class="pre">webkitgtk-6.0</span></code></p></li>
</ul>
<p>The WebKitGTK MiniBrowser is not installed on the default binary path.
The <code class="docutils literal notranslate"><span class="pre">wpt</span></code> script will try to automatically locate it, but if you need
to run it manually you can find it on any of this paths:</p>
<ul class="simple">
<li><p>Fedora: <code class="docutils literal notranslate"><span class="pre">/usr/libexec/webkitgtk-${APIVERSION}/MiniBrowser</span></code></p></li>
<li><p>Arch: <code class="docutils literal notranslate"><span class="pre">/usr/lib/webkitgtk-${APIVERSION}/MiniBrowser</span></code></p></li>
<li><p>Debian or Ubuntu: <code class="docutils literal notranslate"><span class="pre">/usr/lib/${TRIPLET}/webkitgtk-${APIVERSION}/MiniBrowser</span></code></p>
<ul>
<li><p>Note: <code class="docutils literal notranslate"><span class="pre">${TRIPLET}</span></code> is the output of the command <code class="docutils literal notranslate"><span class="pre">gcc</span> <span class="pre">-dumpmachine</span></code></p></li>
</ul>
</li>
</ul>
<section id="nightly-universal-bundle">
<h2>Nightly universal bundle<a class="headerlink" href="#nightly-universal-bundle" title="Link to this heading">¶</a></h2>
<p>Alternatively you can pass to <code class="docutils literal notranslate"><span class="pre">wpt</span></code> the flags <code class="docutils literal notranslate"><span class="pre">--install-browser</span> <span class="pre">--channel=nightly</span></code>
and then <code class="docutils literal notranslate"><span class="pre">wpt</span></code> will automatically download the last bundle and unpack it on the
default <code class="docutils literal notranslate"><span class="pre">wpt</span></code> working directory (usually subdir <code class="docutils literal notranslate"><span class="pre">_venv3/browsers</span></code> in your <code class="docutils literal notranslate"><span class="pre">wpt</span></code> checkout)
Then it will use the unpacked <code class="docutils literal notranslate"><span class="pre">MiniBrowser</span></code> and <code class="docutils literal notranslate"><span class="pre">WebKitWebDriver</span></code> binaries to run the tests.</p>
<p>This universal bundles should work on any Linux distribution as they include inside
the tarball all the system libraries and resources needed to run WebKitGTK, from libc
up to the Mesa graphics drivers without requiring the usage of containers.</p>
<p>If you are using proprietary graphics drivers (NVIDIA, AMDGPU PRO, etc) and you experience
issues with this bundle then a possible workaround is to try to run the tests headless
inside a virtualized display like <code class="docutils literal notranslate"><span class="pre">Xvfb</span></code> (see command <code class="docutils literal notranslate"><span class="pre">xvfb-run</span> <span class="pre">-a</span></code> on Debian/Ubuntu).
You can do this also from inside a virtual machine or Docker container.</p>
</section>
<section id="headless-mode">
<h2>Headless mode<a class="headerlink" href="#headless-mode" title="Link to this heading">¶</a></h2>
<p>WebKitGTK does not have a native headless mode, but you can workaround that
by running the tests inside a virtualized display. For example you can use
<code class="docutils literal notranslate"><span class="pre">weston</span></code> with the headless backend for a virtualized <code class="docutils literal notranslate"><span class="pre">Wayland</span></code> display,
or you can use <code class="docutils literal notranslate"><span class="pre">Xvfb</span></code> for a virtualized <code class="docutils literal notranslate"><span class="pre">X11</span></code> display.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xvfb</span><span class="o">-</span><span class="n">run</span> <span class="o">-</span><span class="n">a</span> <span class="o">./</span><span class="n">wpt</span> <span class="n">run</span> <span class="p">[</span><span class="n">more</span><span class="o">-</span><span class="n">options</span><span class="p">]</span> <span class="n">webkitgtk_minibrowser</span> <span class="p">[</span><span class="n">tests</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">run</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="using-a-custom-webkitgtk-build">
<h2>Using a custom WebKitGTK build<a class="headerlink" href="#using-a-custom-webkitgtk-build" title="Link to this heading">¶</a></h2>
<p>If you want to test with a custom WebKitGTK build the easiest way is that you
install this build in a temporary directory (<code class="docutils literal notranslate"><span class="pre">/tmp/wkgtktest</span></code> in this example),
and then tell <code class="docutils literal notranslate"><span class="pre">wpt</span></code> to run it from there.</p>
<p>Steps:</p>
<ol>
<li><p>Build WebKitGTK passing these arguments to <code class="docutils literal notranslate"><span class="pre">CMake</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">DENABLE_MINIBROWSER</span><span class="o">=</span><span class="n">ON</span> <span class="o">-</span><span class="n">DCMAKE_INSTALL_PREFIX</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">wkgtktest</span>
</pre></div>
</div>
</li>
<li><p>Install it: <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">install</span></code> (or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code>)</p></li>
<li><p>Locate the <code class="docutils literal notranslate"><span class="pre">MiniBrowser</span></code> and <code class="docutils literal notranslate"><span class="pre">WebKitWebDriver</span></code> binaries under the install directory.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">wpt</span></code> passing these two paths like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">wpt</span> <span class="n">run</span> <span class="o">--</span><span class="n">webdriver</span><span class="o">-</span><span class="n">binary</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">wkgtktest</span><span class="o">/</span><span class="nb">bin</span><span class="o">/</span><span class="n">WebKitWebDriver</span> \
          <span class="o">--</span><span class="n">binary</span><span class="o">=/</span><span class="n">tmp</span><span class="o">/</span><span class="n">wkgtktest</span><span class="o">/</span><span class="n">libexec</span><span class="o">/</span><span class="n">MiniBrowser</span> \
          <span class="p">[</span><span class="n">more</span><span class="o">-</span><span class="n">options</span><span class="p">]</span> <span class="n">webkitgtk_minibrowser</span> <span class="p">[</span><span class="n">tests</span><span class="o">-</span><span class="n">to</span><span class="o">-</span><span class="n">run</span><span class="p">]</span>
</pre></div>
</div>
</li>
</ol>
<p>Note: It is important that you build WebKitGTK against the libraries of your system.
Do not build WebKitGTK inside Flatpak or other container unless you run <code class="docutils literal notranslate"><span class="pre">wpt</span></code> also
from inside this container.</p>
</section>
<section id="running-tests-locally">
<h2>Running tests locally<a class="headerlink" href="#running-tests-locally" title="Link to this heading">¶</a></h2>
<p>Is a good idea that you increase the verbosity of <code class="docutils literal notranslate"><span class="pre">wpt</span></code> by passing to it the flag <code class="docutils literal notranslate"><span class="pre">--log-mach=-</span></code>
Also, please check the documentation about <a class="reference internal" href="from-local-system.html"><span class="doc">Running Tests from the Local System</span></a>.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">web-platform-tests</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../test-suite-design.html">Test Suite Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intro-video-transcript.html">“Introduction to WPT” video transcript</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Running Tests</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="from-web.html">Running Tests from the Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="from-local-system.html">Running Tests from the Local System</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="from-local-system.html#install-wpt">Install WPT</a></li>
<li class="toctree-l2"><a class="reference internal" href="from-ci.html">Running Tests on CI</a></li>
<li class="toctree-l2"><a class="reference internal" href="custom-runner.html">Writing Your Own Runner</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools/certs/README.html">WPT Test Certificates</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../writing-tests/index.html">Writing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reviewing-tests/index.html">Reviewing Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin/index.html">Project Administration</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Running Tests</a><ul>
  <li><a href="from-local-system.html">Running Tests from the Local System</a><ul>
      <li>Previous: <a href="safari.html" title="previous chapter">Safari</a></li>
      <li>Next: <a href="wpewebkit_minibrowser.html" title="next chapter">WPE WebKit MiniBrowser</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2019, wpt contributors.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/running-tests/webkitgtk_minibrowser.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>